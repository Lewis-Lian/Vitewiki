import{_ as i,c as a,o as t,ag as n}from"./chunks/framework.Bw-5EFTY.js";const c=JSON.parse('{"title":"网络诊断工具常用命令","description":"","frontmatter":{"title":"网络诊断工具常用命令","icon":"solar:document-bold","order":1,"category":["windwos"],"tag":["Markdown"]},"headers":[],"relativePath":"Studynotes/win/1/1-1.md","filePath":"Studynotes/win/1/1-1.md","lastUpdated":1752819844000}'),e={name:"Studynotes/win/1/1-1.md"};function l(h,s,p,k,d,r){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="网络诊断工具常用命令" tabindex="-1">网络诊断工具常用命令 <a class="header-anchor" href="#网络诊断工具常用命令" aria-label="Permalink to &quot;网络诊断工具常用命令&quot;">​</a></h1><h2 id="_1-ping-命令-基础连通性测试" tabindex="-1">1. ping 命令 - 基础连通性测试 <a class="header-anchor" href="#_1-ping-命令-基础连通性测试" aria-label="Permalink to &quot;1. ping 命令 - 基础连通性测试&quot;">​</a></h2><h3 id="ping-命令基础用法" tabindex="-1">Ping 命令基础用法 <a class="header-anchor" href="#ping-命令基础用法" aria-label="Permalink to &quot;Ping 命令基础用法&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 持续发送ICMP请求（默认直到Ctrl+C停止）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 限制发送次数（如4次）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 设置发包间隔（2秒）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 指定数据包大小（1000字节）</span></span></code></pre></div><h3 id="高级参数" tabindex="-1">高级参数 <a class="header-anchor" href="#高级参数" aria-label="Permalink to &quot;高级参数&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 显示时间戳（Unix格式）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 安静模式（只显示统计结果）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -W</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 设置超时时间（3秒）</span></span></code></pre></div><h3 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h3><ul><li>某些服务器可能禁ping（ICMP屏蔽）</li><li>延迟≠带宽，高延迟可能影响TCP连接建立</li><li>Windows系统默认发送4次包（Linux持续发送）</li></ul><h2 id="_2-nslookup-dns解析检查" tabindex="-1">2. nslookup - DNS解析检查 <a class="header-anchor" href="#_2-nslookup-dns解析检查" aria-label="Permalink to &quot;2. nslookup - DNS解析检查&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nslookup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 查询域名解析</span></span></code></pre></div><h2 id="_3-netstat-网络连接状态分析" tabindex="-1">3. netstat - 网络连接状态分析 <a class="header-anchor" href="#_3-netstat-网络连接状态分析" aria-label="Permalink to &quot;3. netstat - 网络连接状态分析&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -tuln</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 显示所有监听的端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -an</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 显示所有网络连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 显示网络接口统计信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 显示路由表</span></span></code></pre></div><h2 id="_4-curl-http服务诊断" tabindex="-1">4. curl - HTTP服务诊断 <a class="header-anchor" href="#_4-curl-http服务诊断" aria-label="Permalink to &quot;4. curl - HTTP服务诊断&quot;">​</a></h2><h3 id="基础http诊断" tabindex="-1">基础HTTP诊断 <a class="header-anchor" href="#基础http诊断" aria-label="Permalink to &quot;基础HTTP诊断&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 仅获取HTTP头信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 显示详细连接过程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --connect-timeout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 设置连接超时时间</span></span></code></pre></div><h3 id="性能分析" tabindex="-1">性能分析 <a class="header-anchor" href="#性能分析" aria-label="Permalink to &quot;性能分析&quot;">​</a></h3><ol><li>创建 <code>curl-format.txt</code> 文件：<div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>time_namelookup: %{time_namelookup}\\n</span></span>
<span class="line"><span>time_connect: %{time_connect}\\n</span></span>
<span class="line"><span>time_appconnect: %{time_appconnect}\\n</span></span>
<span class="line"><span>time_total: %{time_total}\\n</span></span></code></pre></div></li><li>执行测试：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@curl-format.txt&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/null</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://example.com</span></span></code></pre></div></li></ol><h3 id="常见问题排查" tabindex="-1">常见问题排查 <a class="header-anchor" href="#常见问题排查" aria-label="Permalink to &quot;常见问题排查&quot;">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>命令示例</th><th>说明</th></tr></thead><tbody><tr><td>检查HTTPS证书有效性</td><td><code>curl --ssl-reqd https://expired.badssl.com</code></td><td>证书错误时会报错</td></tr><tr><td>跟踪重定向</td><td><code>curl -L http://bit.ly/xxx</code></td><td><code>-L</code> 自动跟随301/302跳转</td></tr><tr><td>模拟特定User-Agent</td><td><code>curl -A &quot;Mozilla/5.0&quot; example.com</code></td><td>绕过某些服务器的UA限制</td></tr></tbody></table><h2 id="工具联用场景" tabindex="-1">工具联用场景 <a class="header-anchor" href="#工具联用场景" aria-label="Permalink to &quot;工具联用场景&quot;">​</a></h2><h3 id="基础排查链条" tabindex="-1">基础排查链条 <a class="header-anchor" href="#基础排查链条" aria-label="Permalink to &quot;基础排查链条&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nslookup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span></code></pre></div><ul><li>顺序检查：网络连通性 → DNS解析 → HTTP服务状态</li></ul><h3 id="组合诊断示例" tabindex="-1">组合诊断示例 <a class="header-anchor" href="#组合诊断示例" aria-label="Permalink to &quot;组合诊断示例&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.com</span></span></code></pre></div><h3 id="快速测试cdn节点" tabindex="-1">快速测试CDN节点 <a class="header-anchor" href="#快速测试cdn节点" aria-label="Permalink to &quot;快速测试CDN节点&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1.2.3.4:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 通过指定代理IP测试特定节点</span></span></code></pre></div><h2 id="注意事项-1" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项-1" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li>使用 <code>-k</code> 参数可跳过SSL证书验证（仅限测试环境）</li><li>返回 <code>HTTP/2 200</code> 表示成功使用HTTP/2协议</li><li>若遇到连接重置，可能是服务器屏蔽了curl的默认UA（尝试添加 <code>-A &quot;浏览器UA&quot;</code>）</li></ol>`,29)]))}const g=i(e,[["render",l]]);export{c as __pageData,g as default};
